C51 COMPILER V9.54   EXIT                                                                  04/07/2019 11:45:18 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE EXIT
OBJECT MODULE PLACED IN ..\OBJ\exit.obj
COMPILER INVOKED BY: D:\MDK5\C51\BIN\C51.EXE ..\HARDWARE\exit.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\HARDWARE) DEBUG OBJEC
                    -TEXTEND PRINT(.\Listings\exit.lst) TABS(2) OBJECT(..\OBJ\exit.obj)

line level    source

   1          #include "exit.h"
   2          
   3          /////////////
   4          extern  flag ;
   5          extern  id_flag;
   6          /*******************************************************************************
   7          * 函 数 名         :   Exit_Init
   8          * 函数功能         : 外部中断初始化
   9          * 输    入         : 无
  10          * 输    出         : 无
  11          * 说    名         : 设置中断方式，且打开外部中断1，2。
  12          *******************************************************************************/
  13          void Exit_Init (void)
  14            
  15          {
  16   1        IT0=1;  
  17   1        EX0=1;
  18   1      //  IT1=1;
  19   1      //  EX1=1;
  20   1        EA=1;
  21   1      }
  22          /*******************************************************************************
  23          * 函 数 名         :   INT0_ISR
  24          * 函数功能         : 外部中断0服务函数
  25          * 输    入         : 无
  26          * 输    出         : 无
  27          * 说    名         : 改变flag的值
  28          *******************************************************************************/
  29          void INT0_ISR(void) interrupt 0
  30          {
  31   1        if(KEY1==0)
  32   1        { 
  33   2          delay_ms(10);
  34   2          if(KEY1==0)
  35   2          {
  36   3            switch(flag)
  37   3            { 
  38   4              case idle_state : flag = identify_state; break;
  39   4              case identify_state : flag = del_state; break;
  40   4              case del_state : flag = add_state;      break;
  41   4              case add_state : flag = idle_state; break;
  42   4              default : flag = idle_state;
  43   4            }
  44   3           while(!KEY1);
  45   3          }
  46   2        }
  47   1      }
  48          /*******************************************************************************
  49          * 函 数 名         :   INT1_ISR
  50          * 函数功能         : 外部中断1服务函数
  51          * 输    入         : 无
  52          * 输    出         : 无
  53          * 说    名         : 改变flag的值为初始值
  54          *******************************************************************************/
C51 COMPILER V9.54   EXIT                                                                  04/07/2019 11:45:18 PAGE 2   

  55          //void INT1_ISR() interrupt 2
  56          //{
  57          //  if(KEY2==0)
  58          //  { 
  59          //    delay_ms(10);
  60          //    if(KEY2 == 0)
  61          //    {
  62          //     switch(id_flag)
  63          //      { 
  64          //        case id_000 : id_flag = id_001; break;
  65          //        case id_001 : id_flag = id_002; break;
  66          //        case id_002 : id_flag = id_000; break;
  67          //        default : id_flag = id_000;
  68          //      }
  69          //     while(!KEY2);
  70          //    }
  71          //  }
  72          //}
  73          
  74          
  75          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    126    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
